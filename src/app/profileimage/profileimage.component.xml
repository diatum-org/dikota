<ActionBar *ngIf="iOS" backgroundColor="#CDD8ED" class="text" title="Edit Public Image">
   <NavigationButton *ngIf="!isDirty()"></NavigationButton>
   <NavigationButton *ngIf="isDirty()" text="Back" visibility="collapsed"></NavigationButton>
   <ActionItem *ngIf="isDirty()" ios.systemIcon="1" ios.position="left" width="48" height="48" (tap)="onBack()"></ActionItem>
   <ActionItem *ngIf="applyText=='CROP'" icon="res://ic_crop" ios.position="right" width="48" height="48" (tap)="onApply()"></ActionItem>
   <ActionItem *ngIf="applyText=='SAVE'" icon="res://ic_save" ios.position="right" width="48" height="48" (tap)="onApply()"></ActionItem>
</ActionBar>
<ActionBar *ngIf="!iOS" backgroundColor="#CDD8ED" class="text">
  <GridLayout columns="48,*,48" backgroundColor="#CDD8ED">
    <Image col="0" src="~/assets/iarrow.png" width="48" height="48" translateX="-16" (tap)="onBack()"></Image>
    <Label col="1" text="Edit Public Image" fontWeight="Bold" fontSize="18" horizontalAlignment="left" verticalAlignment="center"
        paddingLeft="8"></Label>
    <Label col="2" [text]="applyText" fontWeight="Bold" fontSize="12" horizontalAlignment="right" verticalAlignment="center"
        translateX="-16" (tap)="onApply()"></Label>
  </GridLayout>
</ActionBar>

<GridLayout rows="6*,*,2*,*" backgroundColor="#FFFFFF" background="#FFFFFF">
  <GridLayout #box>
    <Label #frm></Label>
    <Image #img horizontalAlignment="center"></Image>
    <Image #clr src="~/assets/clearoverlay.png" horizontalAlignment="center" 
        [visibility]="clearVisible" (tap)="onClear()"></Image>
    <Image #mov src="~/assets/moveoverlay.png" horizontalAlignment="center" 
        [visibility]="moveVisible" (pan)="onPan($event)" (tap)="onMove()"></Image>
    <Image #sth src="~/assets/stretchoverlay.png" horizontalAlignment="center" 
        [visibility]="stretchVisible" (pinch)="onPinch($event)" (tap)="onStretch()"></Image>
  </GridLayout>
  <Label *ngIf="isEdit()" row="1" text="Tap to toggle move and zoom" class="text" horizontalAlignment="center"
      verticalAlignment="center" fontSize="16"></Label>
  <GridLayout row="2" columns="*,*" orientation="horizontal">
    <Label col="0" text="Photo" horizontalAlignment="center" verticalAlignment="center" (tap)="onCamera()"
      fontWeight="Bold" fontSize="16" class="link"></Label>
    <Label col="1" text="Gallery" horizontalAlignment="center" verticalAlignment="center" (tap)="onGallery()"
      fontWeight="Bold" fontSize="16" class="link"></Label>
  </GridLayout>
  <Label row="3" text="Clear" horizontalAlignment="center" verticalAlignment="center" (tap)="onReset()"
    fontWeight="Bold" fontSize="16" class="link"></Label>
</GridLayout>

